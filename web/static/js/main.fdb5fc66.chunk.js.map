{"version":3,"sources":["core/server.js","core/Passport.js","pages/login.jsx","pages/index.jsx","Layout/base.jsx","App.js","reportWebVitals.js","index.js"],"names":["baseAPI","http","post","get","delete","put","update","api","data","qs","parse","Promise","resolve","reject","axios","headers","localStorage","getItem","then","res","stringify","params","_login","_deleteImg","Passport","quit","isLogin","isAdmin","clear","message","success","setAdmin","this","callback","code","msg","setItem","token","error","username","password","loginControl","Login","props","onKeyup","e","keyCode","AutoLogin","passport","login","state","history","push","event","key","obj","target","value","setState","span","style","marginTop","addonBefore","placeholder","onInput","setUserInfo","Password","onKeyUp","type","onClick","React","Component","Header","Layout","Content","Footer","Column","Table","Index","ColumnGroup","confirm","id","console","log","deleteImg","cancel","total","status","getDataAll","warning","className","theme","mode","defaultSelectedKeys","Item","padding","margin","dataSource","title","dataIndex","render","text","record","size","onConfirm","bind","IMGID","onCancel","okText","cancelText","danger","textAlign","Base","exact","path","to","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fdb5fc66.chunk.js","sourcesContent":["import axios from 'axios';\nimport qs from 'qs';\n\nvar baseAPI = \"http://127.0.0.1:8081\"\n\nlet http = {\n    post: \"\",\n    get: \"\",\n    delete: \"\",\n    put: \"\",\n    update: \"\"\n}\n\nhttp.post = function (api, data) {\n    let params = qs.parse(data)\n    return new Promise((resolve, reject) => {\n        // var client = axios.defaults.headers.common['token'] = localStorage.getItem(\"token\")?localStorage.getItem(\"token\"):\"\";\n        axios.post(baseAPI + api, data, { \n            headers: { \"token\": localStorage.getItem(\"token\") ? localStorage.getItem(\"token\") : \"\" } \n        }\n        ).then((res) => {\n            resolve(res)\n        })\n    })\n}\n\nhttp.get = function (api, data) {\n    let params = qs.stringify(data)\n    return new Promise((resolve, reject) => {\n        // var client = axios.defaults.headers.common['token'] = localStorage.getItem(\"token\")?localStorage.getItem(\"token\"):\"\";\n        axios.get(baseAPI + api,\n            {\n                params: data,\n                headers: { \"token\": localStorage.getItem(\"token\") ? localStorage.getItem(\"token\") : \"\" }\n            }).then((res) => {\n                resolve(res)\n            })\n    })\n}\n\n\n\n\nexport default http\n\n// 登录\nexport function _login(data) {\n    return http.post(\"/manage/login\", data)\n}\n\n// 删除指定文件\nexport function _deleteImg(data) {\n    return http.post(\"/manage/del/img\", data)\n}\n\n// 获取所有数据\nexport function _getDataAll() {\n    return http.get(\"/manage/get/All\")\n}","import { message } from 'antd';\n\nimport { _login } from './server';\n\n\nexport default class Passport {\n    constructor() {\n        // 用户登录标识\n        this.isLogin = localStorage.getItem(\"isLogin\") ? localStorage.getItem(\"isLogin\") : false;\n        this.isAdmin = localStorage.getItem(\"isAdmin\") ? localStorage.getItem(\"isAdmin\") : false;\n    }\n    quit = () => {\n        this.isLogin = false;\n        this.isAdmin = false;\n        localStorage.clear()\n        message.success('退出成功');\n    }\n\n    setAdmin = () =>{\n        this.isAdmin = localStorage.getItem(\"isAdmin\") ? localStorage.getItem(\"isAdmin\") : false;\n    }\n\n    async loginControl(data,callback) {\n        const res = await _login(data)\n        if (res.data.code === 200) {\n            var msg  = \"登录成功\"\n            if (res.data.isAdmin === 1){\n                this.isAdmin = true;\n                localStorage.setItem(\"isAdmin\", \"True\")\n                msg = \"管理员登录成功\"\n            }\n            message.success(msg);\n            this.isLogin = true;\n            localStorage.setItem(\"isLogin\", \"True\")\n            localStorage.setItem(\"token\", res.data.token)\n            // setCookie(\"token\",res.data.token)\n            // 将登录成功之后的操作给调用者处理\n            callback()\n        } else {\n            message.error('登录失败');\n            this.isLogin = false;\n            localStorage.clear()\n        }\n\n    }\n    login(username, password, callback) {\n        if (this.loginControl({ \"username\": username, \"password\": password },callback)) {\n            \n        }\n\n    }\n}\n","import React from 'react';\nimport { Input, Tabs, Modal, Button, message, notification, Pagination, Row, Col } from 'antd';\n\nimport Passport from '../core/Passport';\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: ''\n        };\n    }\n    setUserInfo(event, key) {\n        // input表单元素会自动绑定一个event对象对事件函数\n        // event对象target属性等于input DOM元素对象，所以event.target.value 可以获取到当前input的value值\n        let obj = {};\n        obj[key] = event.target.value;\n        // 更新状态\n        this.setState(obj);\n    }\n\n    onKeyup = (e) => {\n        if (e.keyCode === 13) {\n            this.AutoLogin()\n        }\n    }\n    AutoLogin = () => {\n        let p = this.props.passport == null ? new Passport() : this.props.passport;\n        p.login(this.state.username, this.state.password, () => {\n            // 登录成功时，跳转页面\n            this.props.history.push('/');\n        });\n    }\n    render() {\n        return (\n            <div>\n                <Row>\n                    <Col span={8}></Col>\n                    <Col span={8}>\n\n                        <h3>用户登录</h3>\n                        <div>\n                            <span><Input style={{ marginTop: 20 }} addonBefore=\"账户\" placeholder=\"input username\" onInput={(event) => {\n                                this.setUserInfo(event, 'username');\n                            }} /></span>\n                        </div>\n                        <div>\n                            <span><Input.Password style={{ marginTop: 20 }} addonBefore=\"密码\" placeholder=\"input password\" onKeyUp={this.onKeyup} onInput={(event) => {\n                                this.setUserInfo(event, 'password');\n                            }} /></span>\n                        </div>\n                        <div>\n                            <Button style={{ marginTop: 20 }} type=\"primary\" onClick={this.AutoLogin}>登录</Button>\n                        </div>\n\n                    </Col>\n                    <Col span={8}></Col>\n                </Row>\n\n            </div>\n        );\n    }\n}\n\nexport default Login;","import react, { Component } from 'react';\nimport \"../static/style/main.css\";\nimport { Layout, Menu, Breadcrumb, Table, Button, Space, message, Popconfirm } from 'antd';\nimport { _getDataAll, _deleteImg } from \"../core/server\";\n\nconst { Header, Content, Footer } = Layout;\nconst { Column, ColumnGroup } = Table;\n\nclass Index extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: []\n        };\n    }\n\n    async getDataAll() {\n        const res = await _getDataAll()\n        console.log(res)\n        if (res.data.total > 0) {\n            this.setState({\n                data: res.data.data\n            })\n        }else if(res.data.total === 0){\n            this.setState({\n                data: []\n            })\n        }\n    }\n\n    async deleteImg(data) {\n        const res = await _deleteImg(data)\n        console.log(res)\n        if (res.status === 200) {\n            message.success('删除成功!');\n            this.getDataAll();\n        } else {\n            message.warning('删除失败!');\n        }\n    }\n\n    confirm = (id, e) => {\n        console.log(id);\n        this.deleteImg({ \"img_id\": id })\n        // message.success('Click on Yes');\n    }\n\n    cancel = (e) => {\n        // console.log(e);\n        message.error('Click on No');\n    }\n\n    componentDidMount() {\n        this.getDataAll()\n    }\n    render() {\n        return (\n            <div>\n                <Layout className=\"layout\">\n                    <Header>\n                        <div className=\"logo\" />\n                        <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\n                            <Menu.Item key=\"1\">首页</Menu.Item>\n                            <Menu.Item key=\"2\">详细数据</Menu.Item>\n                            <Menu.Item key=\"3\">退出</Menu.Item>\n                        </Menu>\n                    </Header>\n                    <Content style={{ padding: '0 50px' }}>\n                        <Breadcrumb style={{ margin: '16px 0' }}>\n                            {/* <Breadcrumb.Item>Home</Breadcrumb.Item>\n                            <Breadcrumb.Item>List</Breadcrumb.Item>\n                            <Breadcrumb.Item>App</Breadcrumb.Item> */}\n                        </Breadcrumb>\n                        <div className=\"site-layout-content\">\n\n                            <Table dataSource={this.state.data}>\n\n                                <Column title=\"ID\" dataIndex=\"ID\" key=\"ID\" />\n                                <Column title=\"图片ID\" dataIndex=\"IMGID\" key=\"IMGID\" />\n                                <Column title=\"文件保存路径\" dataIndex=\"FilePath\" key=\"FilePath\" />\n                                <Column title=\"原始文件名\" dataIndex=\"OldName\" key=\"OldName\" />\n                                <Column title=\"访问次数\" dataIndex=\"ViewNum\" key=\"ViewNum\" />\n                                <Column title=\"上传时间\" dataIndex=\"AddTime\" key=\"AddTime\" />\n                                <Column title=\"上传IP\" dataIndex=\"AddIP\" key=\"AddIP\" />\n                                <Column title=\"上传UA\" dataIndex=\"AddUA\" key=\"AddUA\" />\n                                <Column\n                                    title=\"Action\"\n                                    key=\"action\"\n                                    render={(text, record) => (\n                                        <Space size=\"middle\">\n                                            {/* <a>Invite {record.lastName}</a> */}\n                                            <Popconfirm\n                                                title=\"确定删除该文件吗?\"\n                                                onConfirm={this.confirm.bind(this, record.IMGID)}\n                                                onCancel={this.cancel}\n                                                okText=\"Yes\"\n                                                cancelText=\"No\"\n                                            >\n                                                <Button danger>\n                                                    删除\n                                                </Button>\n                                            </Popconfirm>\n\n\n                                        </Space>\n                                    )}\n                                />\n                            </Table>\n\n                        </div>\n                    </Content>\n                    <Footer style={{ textAlign: 'center' }}>Ant Design ©2018 Created by Ant UED</Footer>\n                </Layout>\n            </div>\n        );\n    }\n}\n\nexport default Index;","\nimport React, { Component } from 'react';\nimport Passport from '../core/Passport';\nimport { BrowserRouter as Router, Route, Link, withRouter, Redirect } from \"react-router-dom\";\nimport Login from \"../pages/login\"\nimport Index from '../pages/index';\n\nlet passport = new Passport();\n\n\nclass Base extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n    render() {\n        return (\n            <div>\n                <Router>\n                    <Route exact path=\"/\" render={(props) => {\n\n                        if (passport.isLogin) {\n                            return <Index {...props} />\n                        } else {\n                            return <Redirect to=\"/login\" />\n                        }\n                    }} />\n\n                    <Route path=\"/login\" render={(props) => {\n                        return <Login {...props} passport={passport} />\n                    }} />\n\n\n                </Router>\n\n\n            </div>\n        );\n    }\n}\n\nexport default Base;","// import './static/style/App.css';\nimport Base from \"./Layout/base\"\n\nimport 'antd/dist/antd.css';\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Base />\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './static/style/index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}